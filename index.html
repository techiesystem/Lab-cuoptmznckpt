<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Microsoft Fabric Architect: CU Optimization Checkpoints</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap">
    <style>
        :root {
            --primary-color: #0078d4;
            --primary-dark: #005a9e;
            --secondary-color: #00b294;
            --accent-color: #ffb900;
            --danger-color: #e81123;
            --success-color: #107c10;
            --warning-color: #ff8c00;
            --light-bg: #f5f9fc;
            --card-bg: #ffffff;
            --border-color: #e1e8f0;
            --text-primary: #333333;
            --text-secondary: #666666;
            --code-bg: #1e1e1e;
            --correct-bg: #e8f5e9;
            --correct-border: #4CAF50;
            --incorrect-bg: #ffebee;
            --incorrect-border: #f44336;
            --partial-bg: #fff8e1;
            --partial-border: #ff9800;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #e8f2fc 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary-color) 100%);
            color: white;
            padding: 50px 40px;
            border-radius: 16px;
            margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(0, 88, 212, 0.25);
            position: relative;
            overflow: hidden;
        }

        .header-pattern {
            position: absolute;
            top: 0;
            right: 0;
            width: 400px;
            height: 100%;
            opacity: 0.1;
            z-index: 1;
        }

        .header-content {
            position: relative;
            z-index: 2;
        }

        .assessment-badge {
            background: var(--accent-color);
            color: #000;
            padding: 10px 25px;
            border-radius: 25px;
            font-weight: 700;
            font-size: 1rem;
            display: inline-block;
            margin-bottom: 20px;
            letter-spacing: 0.5px;
            box-shadow: 0 4px 12px rgba(255, 185, 0, 0.3);
        }

        h1 {
            font-size: 2.8rem;
            font-weight: 800;
            margin-bottom: 15px;
            line-height: 1.2;
        }

        .subtitle {
            font-size: 1.3rem;
            opacity: 0.9;
            margin-bottom: 25px;
            max-width: 900px;
        }

        .metadata-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
            background: rgba(255, 255, 255, 0.1);
            padding: 25px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .metadata-item {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .metadata-icon {
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .metadata-content h3 {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .metadata-content p {
            font-size: 1.1rem;
            font-weight: 600;
        }

        /* Progress Tracker */
        .progress-tracker {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 16px;
            margin-bottom: 40px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            display: flex;
            align-items: center;
            gap: 30px;
        }

        .progress-circle {
            width: 100px;
            height: 100px;
            position: relative;
        }

        .progress-circle svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .progress-circle-bg {
            fill: none;
            stroke: var(--border-color);
            stroke-width: 8;
        }

        .progress-circle-fill {
            fill: none;
            stroke: var(--success-color);
            stroke-width: 8;
            stroke-linecap: round;
            stroke-dasharray: 282.6;
            stroke-dashoffset: 282.6;
            transition: stroke-dashoffset 1s ease;
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-dark);
        }

        .progress-label {
            flex: 1;
        }

        .progress-label h3 {
            color: var(--primary-dark);
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .progress-label p {
            color: var(--text-secondary);
        }

        /* Checkpoints Container */
        .checkpoints-container {
            display: flex;
            flex-direction: column;
            gap: 30px;
            margin-bottom: 40px;
        }

        /* Checkpoint Card */
        .checkpoint-card {
            background: var(--card-bg);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--border-color);
        }

        .checkpoint-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12);
        }

        .checkpoint-header {
            background: linear-gradient(to right, #f0f7ff, #e3f2fd);
            padding: 25px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border-color);
        }

        .checkpoint-title {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .checkpoint-number {
            background: var(--primary-color);
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.2rem;
            box-shadow: 0 4px 12px rgba(0, 120, 212, 0.3);
        }

        .checkpoint-header h3 {
            color: var(--primary-dark);
            font-size: 1.4rem;
        }

        .checkpoint-tag {
            background: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--primary-dark);
            border: 1px solid var(--border-color);
        }

        .checkpoint-content {
            padding: 30px;
        }

        .question-section {
            margin-bottom: 25px;
        }

        .question-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .question-icon {
            width: 40px;
            height: 40px;
            background: #e3f2fd;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-color);
            font-size: 1.2rem;
        }

        .question-header h4 {
            color: var(--primary-dark);
            font-size: 1.3rem;
            font-weight: 600;
        }

        .question-text {
            background: #f8fafc;
            padding: 25px;
            border-radius: 12px;
            border-left: 4px solid var(--primary-color);
            margin: 15px 0;
            font-size: 1.1rem;
            line-height: 1.7;
        }

        /* Answer Options */
        .options-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 25px 0;
        }

        .option {
            padding: 20px 25px;
            border-radius: 12px;
            border: 2px solid var(--border-color);
            background: white;
            display: flex;
            align-items: center;
            gap: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .option:hover {
            border-color: var(--primary-color);
            background: #f0f7ff;
        }

        .option.selected {
            border-color: var(--primary-color);
            background: #e3f2fd;
        }

        .option.correct {
            border-color: var(--correct-border);
            background: var(--correct-bg);
        }

        .option.incorrect {
            border-color: var(--incorrect-border);
            background: var(--incorrect-bg);
        }

        .option.partial {
            border-color: var(--partial-border);
            background: var(--partial-bg);
        }

        .option-label {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--text-primary);
            flex-shrink: 0;
            transition: all 0.3s ease;
        }

        .option.selected .option-label {
            background: var(--primary-color);
            color: white;
        }

        .option.correct .option-label {
            background: var(--success-color);
            color: white;
        }

        .option.incorrect .option-label {
            background: var(--danger-color);
            color: white;
        }

        .option.partial .option-label {
            background: var(--warning-color);
            color: white;
        }

        .option-text {
            flex: 1;
            font-size: 1.05rem;
        }

        .option-feedback {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2rem;
        }

        .option.correct .option-feedback {
            color: var(--success-color);
        }

        .option.incorrect .option-feedback {
            color: var(--danger-color);
        }

        /* Short Answer Section */
        .answer-input {
            width: 100%;
            padding: 20px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            font-family: 'Inter', sans-serif;
            font-size: 1.05rem;
            margin: 20px 0;
            min-height: 120px;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        .answer-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 120, 212, 0.1);
        }

        .model-answer {
            background: var(--correct-bg);
            padding: 25px;
            border-radius: 12px;
            border-left: 4px solid var(--correct-border);
            margin-top: 25px;
            display: none;
        }

        .model-answer.show {
            display: block;
            animation: slideDown 0.5s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .model-answer-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            color: var(--success-color);
            font-weight: 600;
        }

        .model-answer-text {
            font-size: 1.05rem;
            line-height: 1.7;
        }

        /* Multi-select Options */
        .multi-select-option {
            padding: 15px 20px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .multi-select-option:hover {
            border-color: var(--primary-color);
        }

        .multi-select-option.selected {
            border-color: var(--primary-color);
            background: #e3f2fd;
        }

        .multi-select-option.correct {
            border-color: var(--success-color);
            background: var(--correct-bg);
        }

        .multi-select-option.incorrect {
            border-color: var(--danger-color);
            background: var(--incorrect-bg);
        }

        .multi-select-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border-color);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .multi-select-option.selected .multi-select-checkbox {
            background: var(--primary-color);
            border-color: var(--primary-color);
        }

        .multi-select-option.selected .multi-select-checkbox:after {
            content: '✓';
            color: white;
            font-size: 0.9rem;
            font-weight: bold;
        }

        /* Action Buttons */
        .checkpoint-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
            padding-top: 25px;
            border-top: 1px solid var(--border-color);
        }

        .action-button {
            padding: 14px 30px;
            border-radius: 10px;
            border: none;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }

        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .submit-btn {
            background: linear-gradient(to right, var(--primary-color), var(--primary-dark));
            color: white;
        }

        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        .reveal-btn {
            background: linear-gradient(to right, var(--secondary-color), #00897b);
            color: white;
        }

        .next-btn {
            background: linear-gradient(to right, var(--success-color), #2E7D32);
            color: white;
        }

        /* Feedback Section */
        .feedback-section {
            margin-top: 25px;
            padding: 20px;
            border-radius: 12px;
            display: none;
            animation: slideDown 0.5s ease;
        }

        .feedback-section.show {
            display: block;
        }

        .feedback-correct {
            background: var(--correct-bg);
            border-left: 4px solid var(--correct-border);
        }

        .feedback-incorrect {
            background: var(--incorrect-bg);
            border-left: 4px solid var(--incorrect-border);
        }

        .feedback-partial {
            background: var(--partial-bg);
            border-left: 4px solid var(--partial-border);
        }

        .feedback-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .feedback-header h4 {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .feedback-correct .feedback-header h4 {
            color: var(--success-color);
        }

        .feedback-incorrect .feedback-header h4 {
            color: var(--danger-color);
        }

        .feedback-partial .feedback-header h4 {
            color: var(--warning-color);
        }

        .feedback-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-icon {
            background: var(--success-color);
            color: white;
        }

        .feedback-incorrect .feedback-icon {
            background: var(--danger-color);
            color: white;
        }

        .feedback-partial .feedback-icon {
            background: var(--warning-color);
            color: white;
        }

        .feedback-text {
            font-size: 1.05rem;
            line-height: 1.7;
        }

        /* CU Visualization */
        .cu-visualization {
            background: linear-gradient(135deg, #1a237e 0%, #283593 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
        }

        .cu-visualization h4 {
            color: #bbdefb;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .cu-meter-container {
            margin: 20px 0;
        }

        .cu-meter {
            height: 10px;
            background: linear-gradient(to right, #4CAF50, #FF9800, #F44336);
            border-radius: 5px;
            position: relative;
            margin-bottom: 10px;
        }

        .cu-spike {
            position: absolute;
            top: -5px;
            width: 3px;
            height: 20px;
            background: white;
            transform: translateX(-50%);
        }

        .cu-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
        }

        /* Certification Readiness */
        .readiness-section {
            background: var(--card-bg);
            padding: 40px;
            border-radius: 16px;
            margin-bottom: 40px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
        }

        .readiness-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .readiness-header h2 {
            color: var(--primary-dark);
            font-size: 2.2rem;
            margin-bottom: 15px;
        }

        .readiness-header p {
            color: var(--text-secondary);
            max-width: 800px;
            margin: 0 auto;
            font-size: 1.1rem;
        }

        .readiness-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .readiness-card {
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            border-top: 5px solid;
            transition: transform 0.3s ease;
        }

        .readiness-card:hover {
            transform: translateY(-5px);
        }

        .readiness-card.exam-ready {
            border-top-color: var(--success-color);
            background: var(--correct-bg);
        }

        .readiness-card.strong {
            border-top-color: #4CAF50;
            background: #e8f5e9;
        }

        .readiness-card.partial {
            border-top-color: var(--warning-color);
            background: var(--partial-bg);
        }

        .readiness-card.not-ready {
            border-top-color: var(--danger-color);
            background: var(--incorrect-bg);
        }

        .readiness-card h3 {
            color: var(--primary-dark);
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .readiness-score {
            font-size: 2.5rem;
            font-weight: 800;
            margin: 15px 0;
        }

        .readiness-card.exam-ready .readiness-score {
            color: var(--success-color);
        }

        .readiness-card.strong .readiness-score {
            color: #4CAF50;
        }

        .readiness-card.partial .readiness-score {
            color: var(--warning-color);
        }

        .readiness-card.not-ready .readiness-score {
            color: var(--danger-color);
        }

        .readiness-action {
            margin-top: 20px;
            padding: 12px 25px;
            border-radius: 25px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .readiness-card.exam-ready .readiness-action {
            background: var(--success-color);
            color: white;
        }

        .readiness-card.strong .readiness-action {
            background: #4CAF50;
            color: white;
        }

        .readiness-card.partial .readiness-action {
            background: var(--warning-color);
            color: white;
        }

        .readiness-card.not-ready .readiness-action {
            background: var(--danger-color);
            color: white;
        }

        /* Score Calculator */
        .score-calculator {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            padding: 30px;
            border-radius: 16px;
            margin-top: 40px;
            text-align: center;
        }

        .score-display {
            font-size: 3.5rem;
            font-weight: 800;
            margin: 20px 0;
        }

        .score-label {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 30px;
        }

        .calculate-btn {
            background: white;
            color: var(--primary-color);
            padding: 15px 40px;
            border-radius: 25px;
            border: none;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .calculate-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        /* Footer Actions */
        .footer-actions {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-top: 50px;
            padding-top: 30px;
            border-top: 2px solid var(--border-color);
        }

        .footer-btn {
            padding: 18px 35px;
            border-radius: 12px;
            border: none;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            transition: all 0.3s ease;
            flex: 1;
            max-width: 400px;
            text-decoration: none;
        }

        .footer-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .download-btn {
            background: linear-gradient(to right, var(--primary-color), var(--primary-dark));
            color: white;
        }

        .reset-btn {
            background: linear-gradient(to right, var(--accent-color), #ff8c00);
            color: #000;
        }

        .approve-btn {
            background: linear-gradient(to right, var(--success-color), #1b5e20);
            color: white;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .metadata-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .footer-actions, .checkpoint-actions {
                flex-direction: column;
                gap: 15px;
            }
            
            .footer-btn, .action-button {
                width: 100%;
                max-width: 100%;
            }
            
            .readiness-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            header {
                padding: 30px 20px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .subtitle {
                font-size: 1.1rem;
            }
            
            .metadata-grid {
                grid-template-columns: 1fr;
            }
            
            .progress-tracker {
                flex-direction: column;
                text-align: center;
                gap: 20px;
            }
            
            .checkpoint-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .checkpoint-tag {
                align-self: flex-start;
            }
            
            .readiness-grid {
                grid-template-columns: 1fr;
            }
            
            .option {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .option-feedback {
                position: static;
                transform: none;
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-pattern">
                <svg viewBox="0 0 400 600" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0,0 L400,0 L400,600 L0,600 Z" fill="white"></path>
                    <circle cx="200" cy="150" r="100" fill="#0078d4" opacity="0.1"></circle>
                    <rect x="100" y="300" width="200" height="100" fill="#00b294" opacity="0.1"></rect>
                    <polygon points="200,450 300,550 100,550" fill="#ffb900" opacity="0.1"></polygon>
                </svg>
            </div>
            
            <div class="header-content">
                <div class="assessment-badge">MICROSOFT FABRIC ARCHITECT ASSESSMENT</div>
                <h1>CU Optimization Checkpoints</h1>
                <p class="subtitle">Validate Your Capacity Unit Management Skills for Microsoft Fabric Architect Certification</p>
                
                <div class="metadata-grid">
                    <div class="metadata-item">
                        <div class="metadata-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="metadata-content">
                            <h3>Checkpoints</h3>
                            <p>6 Validation Points</p>
                        </div>
                    </div>
                    
                    <div class="metadata-item">
                        <div class="metadata-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="metadata-content">
                            <h3>Duration</h3>
                            <p>30-45 Minutes</p>
                        </div>
                    </div>
                    
                    <div class="metadata-item">
                        <div class="metadata-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <div class="metadata-content">
                            <h3>Exam Alignment</h3>
                            <p>DP-600 Fabric Architect</p>
                        </div>
                    </div>
                    
                    <div class="metadata-item">
                        <div class="metadata-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="metadata-content">
                            <h3>Focus Area</h3>
                            <p>Capacity Unit Optimization</p>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Progress Tracker -->
        <div class="progress-tracker">
            <div class="progress-circle">
                <svg viewBox="0 0 100 100">
                    <circle class="progress-circle-bg" cx="50" cy="50" r="45"></circle>
                    <circle class="progress-circle-fill" cx="50" cy="50" r="45"></circle>
                </svg>
                <div class="progress-text">0%</div>
            </div>
            <div class="progress-label">
                <h3>Assessment Progress</h3>
                <p>Complete all 6 checkpoints to evaluate your CU optimization skills and certification readiness.</p>
                <p style="margin-top: 10px; font-size: 0.9rem; color: var(--text-secondary);">
                    <i class="fas fa-info-circle"></i> Each checkpoint validates a specific CU management competency required for the Microsoft Fabric Architect role.
                </p>
            </div>
        </div>

        <!-- Checkpoints Container -->
        <div class="checkpoints-container">
            <!-- Checkpoint 1 -->
            <div class="checkpoint-card" id="checkpoint1">
                <div class="checkpoint-header">
                    <div class="checkpoint-title">
                        <div class="checkpoint-number">1</div>
                        <h3>CU Spike Identification</h3>
                    </div>
                    <div class="checkpoint-tag">Short Answer</div>
                </div>
                <div class="checkpoint-content">
                    <div class="question-section">
                        <div class="question-header">
                            <div class="question-icon">
                                <i class="fas fa-question-circle"></i>
                            </div>
                            <h4>Scenario Analysis</h4>
                        </div>
                        
                        <div class="cu-visualization">
                            <h4><i class="fas fa-chart-line"></i> Current CU Utilization Pattern</h4>
                            <div class="cu-meter-container">
                                <div class="cu-meter">
                                    <div class="cu-spike" style="left: 8%;"></div>
                                    <div class="cu-spike" style="left: 33%; height: 40px; top: -15px; background: #FF5252;"></div>
                                    <div class="cu-spike" style="left: 50%;"></div>
                                    <div class="cu-spike" style="left: 75%;"></div>
                                    <div class="cu-spike" style="left: 92%;"></div>
                                </div>
                                <div class="cu-labels">
                                    <span>00:00</span>
                                    <span style="color: #FF5252; font-weight: bold;">02:00 (PEAK)</span>
                                    <span>06:00</span>
                                    <span>12:00</span>
                                    <span>18:00</span>
                                    <span>23:59</span>
                                </div>
                            </div>
                            <p style="font-size: 0.95rem; opacity: 0.9;">
                                <i class="fas fa-exclamation-triangle"></i> Sharp daily CU spike reaching 95% capacity at 02:00. Pipeline failures correlate with peak periods.
                            </p>
                        </div>
                        
                        <div class="question-text">
                            <p><strong>Question:</strong> You are reviewing Fabric capacity metrics for a global retail analytics platform. You observe sharp, consistent CU spikes reaching 95% capacity at 02:00 daily, followed by pipeline failures during these peak periods. Business users report dashboard unavailability during morning hours.</p>
                            <p style="margin-top: 15px; font-weight: 600; color: var(--primary-dark);">Based on this pattern, what is the most likely root cause of the CU spikes?</p>
                        </div>
                        
                        <textarea class="answer-input" placeholder="Type your analysis here... Consider what typically happens at 02:00 in data platforms and how multiple processes might interact."></textarea>
                        
                        <div class="model-answer" id="modelAnswer1">
                            <div class="model-answer-header">
                                <i class="fas fa-lightbulb"></i>
                                <span>Model Answer</span>
                            </div>
                            <div class="model-answer-text">
                                <p><strong>Synchronized pipeline execution causing excessive concurrent CU consumption.</strong></p>
                                <p style="margin-top: 10px;">In enterprise data platforms, 02:00 is a common time for scheduled batch processing. When multiple ingestion, transformation, and aggregation pipelines are scheduled to start simultaneously without orchestration, they compete for the same capacity units, creating sharp spikes that exceed available capacity. The consistent timing suggests synchronized schedules rather than individual pipeline performance issues.</p>
                                <p style="margin-top: 10px; font-weight: 600; color: var(--success-color);"><i class="fas fa-check-circle"></i> Key Insight: Look for synchronization patterns in scheduled workloads when spikes occur at consistent times.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="checkpoint-actions">
                        <button class="action-button reveal-btn" onclick="revealAnswer(1)">
                            <i class="fas fa-eye"></i> Reveal Model Answer
                        </button>
                        <button class="action-button submit-btn" onclick="submitCheckpoint(1)" disabled>
                            <i class="fas fa-check-circle"></i> Submit Answer
                        </button>
                    </div>
                    
                    <div class="feedback-section" id="feedback1">
                        <!-- Feedback will be inserted here -->
                    </div>
                </div>
            </div>

            <!-- Checkpoint 2 -->
            <div class="checkpoint-card" id="checkpoint2">
                <div class="checkpoint-header">
                    <div class="checkpoint-title">
                        <div class="checkpoint-number">2</div>
                        <h3>Root Cause Analysis</h3>
                    </div>
                    <div class="checkpoint-tag">Best Answer Selection</div>
                </div>
                <div class="checkpoint-content">
                    <div class="question-section">
                        <div class="question-header">
                            <div class="question-icon">
                                <i class="fas fa-search"></i>
                            </div>
                            <h4>Problem Classification</h4>
                        </div>
                        
                        <div class="question-text">
                            <p><strong>Question:</strong> Continuing from the previous scenario, your analysis confirms synchronized pipeline execution at 02:00. The total daily CU consumption is well within capacity limits, but the 02:00 spike causes failures.</p>
                            <p style="margin-top: 15px; font-weight: 600; color: var(--primary-dark);">Why is this fundamentally a concurrency problem rather than a capacity problem?</p>
                        </div>
                        
                        <div class="options-container">
                            <div class="option" data-option="A" onclick="selectOption(this, 2)">
                                <div class="option-label">A</div>
                                <div class="option-text">The pipelines are poorly optimized and use too many CUs individually</div>
                            </div>
                            <div class="option" data-option="B" onclick="selectOption(this, 2)">
                                <div class="option-label">B</div>
                                <div class="option-text">The total workload is manageable, but simultaneous execution creates peak CU saturation. Adjusting orchestration reduces peaks without adding capacity</div>
                            </div>
                            <div class="option" data-option="C" onclick="selectOption(this, 2)">
                                <div class="option-label">C</div>
                                <div class="option-text">The data volume has outgrown the current capacity, requiring immediate scaling</div>
                            </div>
                            <div class="option" data-option="D" onclick="selectOption(this, 2)">
                                <div class="option-label">D</div>
                                <div class="option-text">The monitoring system is incorrectly reporting CU utilization</div>
                            </div>
                        </div>
                        
                        <div class="model-answer" id="modelAnswer2">
                            <div class="model-answer-header">
                                <i class="fas fa-lightbulb"></i>
                                <span>Correct Answer: B</span>
                            </div>
                            <div class="model-answer-text">
                                <p><strong>The total workload is manageable, but simultaneous execution creates peak CU saturation. Adjusting orchestration reduces peaks without adding capacity.</strong></p>
                                <p style="margin-top: 10px;">This distinguishes between capacity problems (insufficient resources for total workload) and concurrency problems (resources adequate but poorly scheduled). The key evidence is that total daily CU consumption is within limits—only the peak exceeds capacity. Concurrency problems are solved through orchestration, not scaling.</p>
                                <p style="margin-top: 10px; font-weight: 600; color: var(--success-color);"><i class="fas fa-check-circle"></i> Architect Principle: Always optimize concurrency before considering capacity scaling. This is cost-effective and often solves the problem.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="checkpoint-actions">
                        <button class="action-button reveal-btn" onclick="revealAnswer(2)">
                            <i class="fas fa-eye"></i> Reveal Correct Answer
                        </button>
                        <button class="action-button submit-btn" onclick="submitCheckpoint(2)" disabled>
                            <i class="fas fa-check-circle"></i> Submit Answer
                        </button>
                    </div>
                    
                    <div class="feedback-section" id="feedback2">
                        <!-- Feedback will be inserted here -->
                    </div>
                </div>
            </div>

            <!-- Checkpoint 3 -->
            <div class="checkpoint-card" id="checkpoint3">
                <div class="checkpoint-header">
                    <div class="checkpoint-title">
                        <div class="checkpoint-number">3</div>
                        <h3>Pipeline Redesign</h3>
                    </div>
                    <div class="checkpoint-tag">Design Validation</div>
                </div>
                <div class="checkpoint-content">
                    <div class="question-section">
                        <div class="question-header">
                            <div class="question-icon">
                                <i class="fas fa-project-diagram"></i>
                            </div>
                            <h4>Architecture Decision</h4>
                        </div>
                        
                        <div class="question-text">
                            <p><strong>Question:</strong> You need to redesign the pipeline architecture to address the concurrency issue. Current architecture: each pipeline performs ingestion, transformation, and aggregation as a single monolithic unit.</p>
                            <p style="margin-top: 15px; font-weight: 600; color: var(--primary-dark);">Which redesign approach would BEST improve CU efficiency and enable better orchestration control?</p>
                        </div>
                        
                        <div class="options-container">
                            <div class="option" data-option="A" onclick="selectOption(this, 3)">
                                <div class="option-label">A</div>
                                <div class="option-text">Add retries to the pipeline to handle failures during peak periods</div>
                            </div>
                            <div class="option" data-option="B" onclick="selectOption(this, 3)">
                                <div class="option-label">B</div>
                                <div class="option-text">Split ingestion, transformation, and aggregation into separate, specialized pipelines with dependencies</div>
                            </div>
                            <div class="option" data-option="C" onclick="selectOption(this, 3)">
                                <div class="option-label">C</div>
                                <div class="option-text">Increase pipeline timeout values to allow completion during contention</div>
                            </div>
                            <div class="option" data-option="D" onclick="selectOption(this, 3)">
                                <div class="option-label">D</div>
                                <div class="option-text">Trigger all pipeline stages manually during off-peak hours</div>
                            </div>
                        </div>
                        
                        <div class="model-answer" id="modelAnswer3">
                            <div class="model-answer-header">
                                <i class="fas fa-lightbulb"></i>
                                <span>Correct Answer: B</span>
                            </div>
                            <div class="model-answer-text">
                                <p><strong>Split ingestion, transformation, and aggregation into separate, specialized pipelines with dependencies.</strong></p>
                                <p style="margin-top: 10px;">Pipeline decomposition enables finer-grained scheduling control and better CU optimization. Separate pipelines allow:</p>
                                <ul style="margin-top: 10px; padding-left: 20px;">
                                    <li>Ingestion to run frequently with low CU impact</li>
                                    <li>Transformation to be staggered to avoid concurrency</li>
                                    <li>Aggregation to run only after transformation completes</li>
                                    <li>Independent optimization of each pipeline type</li>
                                </ul>
                                <p style="margin-top: 10px; font-weight: 600; color: var(--success-color);"><i class="fas fa-check-circle"></i> Architecture Pattern: Decompose monoliths into specialized components for better orchestration and resource management.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="checkpoint-actions">
                        <button class="action-button reveal-btn" onclick="revealAnswer(3)">
                            <i class="fas fa-eye"></i> Reveal Correct Answer
                        </button>
                        <button class="action-button submit-btn" onclick="submitCheckpoint(3)" disabled>
                            <i class="fas fa-check-circle"></i> Submit Answer
                        </button>
                    </div>
                    
                    <div class="feedback-section" id="feedback3">
                        <!-- Feedback will be inserted here -->
                    </div>
                </div>
            </div>

            <!-- Checkpoint 4 -->
            <div class="checkpoint-card" id="checkpoint4">
                <div class="checkpoint-header">
                    <div class="checkpoint-title">
                        <div class="checkpoint-number">4</div>
                        <h3>Schedule Optimization</h3>
                    </div>
                    <div class="checkpoint-tag">Scenario-Based Decision</div>
                </div>
                <div class="checkpoint-content">
                    <div class="question-section">
                        <div class="question-header">
                            <div class="question-icon">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                            <h4>Scheduling Strategy</h4>
                        </div>
                        
                        <div class="question-text">
                            <p><strong>Scenario:</strong> You have decomposed pipelines and now need to schedule them. You have 10 transformation pipelines (each medium CU), 10 ingestion pipelines (low CU), and 10 aggregation pipelines (medium CU). Business requires all data refreshed by 06:00.</p>
                            <p style="margin-top: 15px; font-weight: 600; color: var(--primary-dark);">Which scheduling approach would BEST reduce CU contention while meeting business requirements?</p>
                        </div>
                        
                        <div class="options-container">
                            <div class="option" data-option="A" onclick="selectOption(this, 4)">
                                <div class="option-label">A</div>
                                <div class="option-text">Start all pipelines at midnight to ensure completion by 06:00</div>
                            </div>
                            <div class="option" data-option="B" onclick="selectOption(this, 4)">
                                <div class="option-label">B</div>
                                <div class="option-text">Stagger heavy transformation pipelines with 15-minute intervals between starts</div>
                            </div>
                            <div class="option" data-option="C" onclick="selectOption(this, 4)">
                                <div class="option-label">C</div>
                                <div class="option-text">Increase ingestion frequency to every 5 minutes for maximum freshness</div>
                            </div>
                            <div class="option" data-option="D" onclick="selectOption(this, 4)">
                                <div class="option-label">D</div>
                                <div class="option-text">Run transformations during business hours when users are active</div>
                            </div>
                        </div>
                        
                        <div class="model-answer" id="modelAnswer4">
                            <div class="model-answer-header">
                                <i class="fas fa-lightbulb"></i>
                                <span>Correct Answer: B</span>
                            </div>
                            <div class="model-answer-text">
                                <p><strong>Stagger heavy transformation pipelines with 15-minute intervals between starts.</strong></p>
                                <p style="margin-top: 10px;">Staggering is the most effective technique for reducing CU contention from concurrent transformations:</p>
                                <ul style="margin-top: 10px; padding-left: 20px;">
                                    <li>Prevents multiple medium-CU transformations from running simultaneously</li>
                                    <li>Allows completion by 06:00 through careful scheduling</li>
                                    <li>Maintains dependency order (ingestion → transformation → aggregation)</li>
                                    <li>Optimizes CU utilization without compromising freshness requirements</li>
                                </ul>
                                <p style="margin-top: 10px; font-weight: 600; color: var(--success-color);"><i class="fas fa-check-circle"></i> Scheduling Principle: Stagger compute-intensive workloads, not data-intensive ones. Ingestion can run concurrently with low CU impact.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="checkpoint-actions">
                        <button class="action-button reveal-btn" onclick="revealAnswer(4)">
                            <i class="fas fa-eye"></i> Reveal Correct Answer
                        </button>
                        <button class="action-button submit-btn" onclick="submitCheckpoint(4)" disabled>
                            <i class="fas fa-check-circle"></i> Submit Answer
                        </button>
                    </div>
                    
                    <div class="feedback-section" id="feedback4">
                        <!-- Feedback will be inserted here -->
                    </div>
                </div>
            </div>

            <!-- Checkpoint 5 -->
            <div class="checkpoint-card" id="checkpoint5">
                <div class="checkpoint-header">
                    <div class="checkpoint-title">
                        <div class="checkpoint-number">5</div>
                        <h3>Compute Optimization</h3>
                    </div>
                    <div class="checkpoint-tag">Multi-Select Assessment</div>
                </div>
                <div class="checkpoint-content">
                    <div class="question-section">
                        <div class="question-header">
                            <div class="question-icon">
                                <i class="fas fa-cogs"></i>
                            </div>
                            <h4>Optimization Techniques</h4>
                        </div>
                        
                        <div class="question-text">
                            <p><strong>Question:</strong> Beyond scheduling improvements, you want to optimize individual pipeline CU consumption. Which of the following actions would reduce CU usage in Microsoft Fabric pipelines?</p>
                            <p style="margin-top: 15px; font-weight: 600; color: var(--primary-dark);">Select all that apply:</p>
                        </div>
                        
                        <div class="multi-select-container">
                            <div class="multi-select-option" data-option="1" onclick="toggleMultiSelect(this, 5)">
                                <div class="multi-select-checkbox"></div>
                                <div class="option-text">Incremental loads (process only changed data)</div>
                            </div>
                            <div class="multi-select-option" data-option="2" onclick="toggleMultiSelect(this, 5)">
                                <div class="multi-select-checkbox"></div>
                                <div class="option-text">Reduced parallelism (limit concurrent activities)</div>
                            </div>
                            <div class="multi-select-option" data-option="3" onclick="toggleMultiSelect(this, 5)">
                                <div class="multi-select-checkbox"></div>
                                <div class="option-text">Full refresh (process all data each run)</div>
                            </div>
                            <div class="multi-select-option" data-option="4" onclick="toggleMultiSelect(this, 5)">
                                <div class="multi-select-checkbox"></div>
                                <div class="option-text">Reuse intermediate results (cache transformations)</div>
                            </div>
                        </div>
                        
                        <div class="model-answer" id="modelAnswer5">
                            <div class="model-answer-header">
                                <i class="fas fa-lightbulb"></i>
                                <span>Correct Answers: 1, 2, 4</span>
                            </div>
                            <div class="model-answer-text">
                                <p><strong>Incremental loads, Reduced parallelism, Reuse intermediate results</strong></p>
                                <p style="margin-top: 10px;">These techniques directly reduce CU consumption:</p>
                                <ul style="margin-top: 10px; padding-left: 20px;">
                                    <li><strong>Incremental loads:</strong> Process only changed data, significantly reducing data volume and CU usage</li>
                                    <li><strong>Reduced parallelism:</strong> Limit concurrent activities within a pipeline to prevent self-contention</li>
                                    <li><strong>Reuse intermediate results:</strong> Cache transformation outputs to avoid recomputation</li>
                                </ul>
                                <p style="margin-top: 10px;"><strong>Full refresh</strong> increases CU usage by processing all data regardless of changes, making it counterproductive for CU optimization.</p>
                                <p style="margin-top: 10px; font-weight: 600; color: var(--success-color);"><i class="fas fa-check-circle"></i> Optimization Hierarchy: 1) Reduce data volume, 2) Reduce concurrency, 3) Reuse computations.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="checkpoint-actions">
                        <button class="action-button reveal-btn" onclick="revealAnswer(5)">
                            <i class="fas fa-eye"></i> Reveal Correct Answers
                        </button>
                        <button class="action-button submit-btn" onclick="submitCheckpoint(5)" disabled>
                            <i class="fas fa-check-circle"></i> Submit Answers
                        </button>
                    </div>
                    
                    <div class="feedback-section" id="feedback5">
                        <!-- Feedback will be inserted here -->
                    </div>
                </div>
            </div>

            <!-- Checkpoint 6 -->
            <div class="checkpoint-card" id="checkpoint6">
                <div class="checkpoint-header">
                    <div class="checkpoint-title">
                        <div class="checkpoint-number">6</div>
                        <h3>Validation & Metrics</h3>
                    </div>
                    <div class="checkpoint-tag">Short Answer Justification</div>
                </div>
                <div class="checkpoint-content">
                    <div class="question-section">
                        <div class="question-header">
                            <div class="question-icon">
                                <i class="fas fa-chart-bar"></i>
                            </div>
                            <h4>Business Justification</h4>
                        </div>
                        
                        <div class="question-text">
                            <p><strong>Scenario:</strong> After implementing staggered scheduling and pipeline decomposition, you observe that total pipeline runtime has increased from 4 hours to 6 hours, but peak CU has reduced from 95% to 65%. Pipeline failures have dropped from 20% to 1%.</p>
                            <p style="margin-top: 15px; font-weight: 600; color: var(--primary-dark);">Why is the increased runtime an acceptable trade-off for the reduced peak CU and improved reliability?</p>
                        </div>
                        
                        <textarea class="answer-input" placeholder="Explain the business and technical justification... Consider reliability, cost, and user impact."></textarea>
                        
                        <div class="model-answer" id="modelAnswer6">
                            <div class="model-answer-header">
                                <i class="fas fa-lightbulb"></i>
                                <span>Model Answer</span>
                            </div>
                            <div class="model-answer-text">
                                <p><strong>Lower peak CU prevents contention and failures, ensuring stable performance and predictable cost, which is more valuable than absolute speed for batch processing.</strong></p>
                                <p style="margin-top: 10px;">The trade-off analysis shows:</p>
                                <ul style="margin-top: 10px; padding-left: 20px;">
                                    <li><strong>Business Impact:</strong> Reliable morning dashboards (06:00) are more valuable than faster-but-unreliable midnight processing</li>
                                    <li><strong>Cost Impact:</strong> Lower peak CU means no immediate capacity scaling required, controlling costs</li>
                                    <li><strong>Technical Impact:</strong> Reduced failures mean less manual intervention and higher data quality</li>
                                    <li><strong>User Impact:</strong> Stable system availability during business hours outweighs batch processing speed</li>
                                </ul>
                                <p style="margin-top: 10px; font-weight: 600; color: var(--success-color);"><i class="fas fa-check-circle"></i> Architect Decision: Optimize for reliability and cost predictability over raw speed for batch workloads. Speed matters for interactive queries, not overnight processing.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="checkpoint-actions">
                        <button class="action-button reveal-btn" onclick="revealAnswer(6)">
                            <i class="fas fa-eye"></i> Reveal Model Answer
                        </button>
                        <button class="action-button submit-btn" onclick="submitCheckpoint(6)" disabled>
                            <i class="fas fa-check-circle"></i> Submit Answer
                        </button>
                    </div>
                    
                    <div class="feedback-section" id="feedback6">
                        <!-- Feedback will be inserted here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Certification Readiness Section -->
        <section class="readiness-section">
            <div class="readiness-header">
                <h2><i class="fas fa-certificate"></i> Certification Readiness Assessment</h2>
                <p>Based on your performance across all checkpoints, evaluate your readiness for the Microsoft Fabric Architect exam (DP-600) CU optimization domain.</p>
            </div>
            
            <div class="readiness-grid">
                <div class="readiness-card exam-ready">
                    <h3>Fabric Architect – Exam Ready</h3>
                    <div class="readiness-score">90–100</div>
                    <p>Strong understanding of CU optimization principles. Ready for exam scenarios on capacity management, scheduling, and cost optimization.</p>
                    <button class="readiness-action" onclick="calculateScore()">Calculate Your Score</button>
                </div>
                
                <div class="readiness-card strong">
                    <h3>Strong Candidate – Minor Review Needed</h3>
                    <div class="readiness-score">80–89</div>
                    <p>Good grasp of concepts with minor gaps. Review scheduling strategies and concurrency management before exam.</p>
                    <button class="readiness-action" onclick="calculateScore()">Calculate Your Score</button>
                </div>
                
                <div class="readiness-card partial">
                    <h3>Partial Readiness – CU Concepts Weak</h3>
                    <div class="readiness-score">70–79</div>
                    <p>Basic understanding but lacking depth in optimization techniques. Focus on pipeline decomposition and staggered scheduling.</p>
                    <button class="readiness-action" onclick="calculateScore()">Calculate Your Score</button>
                </div>
                
                <div class="readiness-card not-ready">
                    <h3>Not Ready – Revisit CU Architecture</h3>
                    <div class="readiness-score">&lt; 70</div>
                    <p>Fundamental gaps in CU management concepts. Revisit CU architecture principles before attempting exam questions.</p>
                    <button class="readiness-action" onclick="calculateScore()">Calculate Your Score</button>
                </div>
            </div>
            
            <div class="score-calculator">
                <h3 style="color: white; margin-bottom: 15px;">Calculate Your Certification Readiness Score</h3>
                <p class="score-label">Complete all checkpoints to see your score and readiness level</p>
                <div class="score-display" id="finalScore">--</div>
                <button class="calculate-btn" onclick="calculateScore()">
                    <i class="fas fa-calculator"></i> Calculate Final Score
                </button>
            </div>
        </section>

        <!-- Footer Actions -->
        <div class="footer-actions">
            <button class="footer-btn download-btn" id="downloadAssessment">
                <i class="fas fa-download"></i> Download Assessment (PDF)
            </button>
            
            <button class="footer-btn reset-btn" id="resetAssessment">
                <i class="fas fa-redo"></i> Reset Assessment
            </button>
            
            <button class="footer-btn approve-btn" id="approveAssessment">
                <i class="fas fa-check-double"></i> Approve Assessment
            </button>
        </div>
    </div>

    <script>
        // Assessment state
        const assessmentState = {
            checkpoints: {
                1: { answered: false, correct: false, score: 0 },
                2: { answered: false, correct: false, score: 0 },
                3: { answered: false, correct: false, score: 0 },
                4: { answered: false, correct: false, score: 0 },
                5: { answered: false, correct: false, score: 0 },
                6: { answered: false, correct: false, score: 0 }
            },
            totalScore: 0,
            completed: false
        };

        // Correct answers
        const correctAnswers = {
            1: "Synchronized pipeline execution causing excessive concurrent CU consumption.",
            2: "B",
            3: "B",
            4: "B",
            5: ["1", "2", "4"], // Multi-select correct options
            6: "Lower peak CU prevents contention and failures, ensuring stable performance and predictable cost."
        };

        // Track selected options
        let selectedOptions = {
            2: null,
            3: null,
            4: null,
            5: []
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Enable submit buttons when answers are provided
            const textAreas = document.querySelectorAll('.answer-input');
            textAreas.forEach(textarea => {
                textarea.addEventListener('input', function() {
                    const checkpointNum = this.closest('.checkpoint-card').id.replace('checkpoint', '');
                    const submitBtn = this.closest('.checkpoint-content').querySelector('.submit-btn');
                    if (this.value.trim().length > 10) {
                        submitBtn.disabled = false;
                    } else {
                        submitBtn.disabled = true;
                    }
                });
            });

            // Initialize progress circle
            updateProgress();
        });

        // Select option for single-choice questions
        function selectOption(element, checkpointNum) {
            const container = element.closest('.options-container');
            const options = container.querySelectorAll('.option');
            
            // Remove selected class from all options
            options.forEach(opt => {
                opt.classList.remove('selected');
                opt.classList.remove('correct', 'incorrect', 'partial');
            });
            
            // Add selected class to clicked option
            element.classList.add('selected');
            selectedOptions[checkpointNum] = element.getAttribute('data-option');
            
            // Enable submit button
            const submitBtn = element.closest('.checkpoint-content').querySelector('.submit-btn');
            submitBtn.disabled = false;
        }

        // Toggle multi-select options
        function toggleMultiSelect(element, checkpointNum) {
            const optionId = element.getAttribute('data-option');
            const index = selectedOptions[checkpointNum].indexOf(optionId);
            
            if (index === -1) {
                // Add to selection
                selectedOptions[checkpointNum].push(optionId);
                element.classList.add('selected');
            } else {
                // Remove from selection
                selectedOptions[checkpointNum].splice(index, 1);
                element.classList.remove('selected');
            }
            
            // Enable submit button if at least one option is selected
            const submitBtn = element.closest('.checkpoint-content').querySelector('.submit-btn');
            submitBtn.disabled = selectedOptions[checkpointNum].length === 0;
        }

        // Reveal answer
        function revealAnswer(checkpointNum) {
            const modelAnswer = document.getElementById(`modelAnswer${checkpointNum}`);
            modelAnswer.classList.add('show');
            
            // Disable reveal button
            const revealBtn = document.querySelector(`#checkpoint${checkpointNum} .reveal-btn`);
            revealBtn.disabled = true;
            revealBtn.innerHTML = '<i class="fas fa-eye-slash"></i> Answer Revealed';
            revealBtn.style.opacity = '0.7';
            
            // Show correct answers for multi-select
            if (checkpointNum === 5) {
                const options = document.querySelectorAll(`#checkpoint${checkpointNum} .multi-select-option`);
                options.forEach(option => {
                    const optionId = option.getAttribute('data-option');
                    if (correctAnswers[5].includes(optionId)) {
                        option.classList.add('correct');
                    } else {
                        option.classList.add('incorrect');
                    }
                });
            }
            
            // Show correct answers for single choice
            if ([2, 3, 4].includes(checkpointNum)) {
                const options = document.querySelectorAll(`#checkpoint${checkpointNum} .option`);
                options.forEach(option => {
                    const optionLetter = option.getAttribute('data-option');
                    if (optionLetter === correctAnswers[checkpointNum]) {
                        option.classList.add('correct');
                    } else {
                        option.classList.add('incorrect');
                    }
                });
            }
        }

        // Submit checkpoint
        function submitCheckpoint(checkpointNum) {
            const checkpoint = assessmentState.checkpoints[checkpointNum];
            let isCorrect = false;
            let score = 0;
            let feedbackHTML = '';
            
            // Check answer based on question type
            if (checkpointNum === 1 || checkpointNum === 6) {
                // Short answer - check for keywords
                const userAnswer = document.querySelector(`#checkpoint${checkpointNum} .answer-input`).value.toLowerCase();
                const modelAnswer = correctAnswers[checkpointNum].toLowerCase();
                
                // Check for key concepts (simplified check)
                const keyConcepts = {
                    1: ['synchronized', 'concurrent', 'simultaneous', '02:00', 'execution'],
                    6: ['peak', 'contention', 'failure', 'reliable', 'stable', 'cost']
                };
                
                let matches = 0;
                keyConcepts[checkpointNum].forEach(concept => {
                    if (userAnswer.includes(concept)) matches++;
                });
                
                score = Math.min(100, Math.floor((matches / keyConcepts[checkpointNum].length) * 100));
                isCorrect = score >= 70;
                
                if (isCorrect) {
                    feedbackHTML = `
                        <div class="feedback-section feedback-correct show">
                            <div class="feedback-header">
                                <div class="feedback-icon">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <h4>Correct Analysis</h4>
                            </div>
                            <div class="feedback-text">
                                <p>Your answer demonstrates good understanding of CU optimization principles. Score: ${score}/100</p>
                                <p style="margin-top: 10px; font-weight: 600;">Key concepts identified: ${matches}/${keyConcepts[checkpointNum].length}</p>
                            </div>
                        </div>
                    `;
                } else {
                    feedbackHTML = `
                        <div class="feedback-section feedback-partial show">
                            <div class="feedback-header">
                                <div class="feedback-icon">
                                    <i class="fas fa-exclamation-circle"></i>
                                </div>
                                <h4>Partial Understanding</h4>
                            </div>
                            <div class="feedback-text">
                                <p>Your answer covers some concepts but misses key points. Score: ${score}/100</p>
                                <p style="margin-top: 10px;">Review the model answer to understand the complete reasoning.</p>
                            </div>
                        </div>
                    `;
                }
                
            } else if (checkpointNum === 5) {
                // Multi-select
                const userSelections = [...selectedOptions[checkpointNum]];
                const correctSelections = [...correctAnswers[checkpointNum]];
                
                // Calculate score
                let correctCount = 0;
                userSelections.forEach(selection => {
                    if (correctSelections.includes(selection)) correctCount++;
                });
                
                // Penalize for incorrect selections
                const incorrectCount = userSelections.length - correctCount;
                score = Math.max(0, Math.floor((correctCount / correctSelections.length) * 100) - (incorrectCount * 25));
                isCorrect = score >= 80;
                
                // Visual feedback for options
                const options = document.querySelectorAll(`#checkpoint${checkpointNum} .multi-select-option`);
                options.forEach(option => {
                    const optionId = option.getAttribute('data-option');
                    const isUserSelected = userSelections.includes(optionId);
                    const isCorrectOption = correctSelections.includes(optionId);
                    
                    if (isUserSelected && isCorrectOption) {
                        option.classList.add('correct');
                    } else if (isUserSelected && !isCorrectOption) {
                        option.classList.add('incorrect');
                    } else if (!isUserSelected && isCorrectOption) {
                        option.classList.add('partial'); // Should have been selected
                    }
                });
                
                if (isCorrect) {
                    feedbackHTML = `
                        <div class="feedback-section feedback-correct show">
                            <div class="feedback-header">
                                <div class="feedback-icon">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <h4>Correct Selection</h4>
                            </div>
                            <div class="feedback-text">
                                <p>You correctly identified ${correctCount} out of ${correctSelections.length} optimization techniques. Score: ${score}/100</p>
                                ${incorrectCount > 0 ? `<p style="margin-top: 10px;">Note: You selected ${incorrectCount} incorrect option(s).</p>` : ''}
                            </div>
                        </div>
                    `;
                } else {
                    feedbackHTML = `
                        <div class="feedback-section feedback-partial show">
                            <div class="feedback-header">
                                <div class="feedback-icon">
                                    <i class="fas fa-exclamation-circle"></i>
                                </div>
                                <h4>Partial Selection</h4>
                            </div>
                            <div class="feedback-text">
                                <p>You identified ${correctCount} out of ${correctSelections.length} correct techniques. Score: ${score}/100</p>
                                <p style="margin-top: 10px;">Review which techniques actually reduce CU consumption vs. increase it.</p>
                            </div>
                        </div>
                    `;
                }
                
            } else {
                // Single choice (2, 3, 4)
                const userAnswer = selectedOptions[checkpointNum];
                isCorrect = userAnswer === correctAnswers[checkpointNum];
                score = isCorrect ? 100 : 0;
                
                // Visual feedback for options
                const options = document.querySelectorAll(`#checkpoint${checkpointNum} .option`);
                options.forEach(option => {
                    const optionLetter = option.getAttribute('data-option');
                    if (optionLetter === correctAnswers[checkpointNum]) {
                        option.classList.add('correct');
                    } else if (optionLetter === userAnswer) {
                        option.classList.add('incorrect');
                    }
                });
                
                if (isCorrect) {
                    feedbackHTML = `
                        <div class="feedback-section feedback-correct show">
                            <div class="feedback-header">
                                <div class="feedback-icon">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <h4>Correct Answer</h4>
                            </div>
                            <div class="feedback-text">
                                <p>Excellent! You selected the optimal solution for CU optimization. Score: 100/100</p>
                                <p style="margin-top: 10px;">This demonstrates strong understanding of pipeline architecture and scheduling strategies.</p>
                            </div>
                        </div>
                    `;
                } else {
                    feedbackHTML = `
                        <div class="feedback-section feedback-incorrect show">
                            <div class="feedback-header">
                                <div class="feedback-icon">
                                    <i class="fas fa-times-circle"></i>
                                </div>
                                <h4>Incorrect Answer</h4>
                            </div>
                            <div class="feedback-text">
                                <p>The selected option is not optimal for CU optimization. Score: 0/100</p>
                                <p style="margin-top: 10px;">Review why the correct answer provides better CU efficiency and orchestration control.</p>
                            </div>
                        </div>
                    `;
                }
            }
            
            // Update assessment state
            checkpoint.answered = true;
            checkpoint.correct = isCorrect;
            checkpoint.score = score;
            
            // Update UI
            const feedbackContainer = document.getElementById(`feedback${checkpointNum}`);
            feedbackContainer.innerHTML = feedbackHTML;
            
            // Disable submit button
            const submitBtn = document.querySelector(`#checkpoint${checkpointNum} .submit-btn`);
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-check-double"></i> Submitted';
            submitBtn.style.opacity = '0.7';
            
            // Enable reveal button if not already clicked
            const revealBtn = document.querySelector(`#checkpoint${checkpointNum} .reveal-btn`);
            if (!revealBtn.disabled) {
                revealBtn.click();
            }
            
            // Update progress
            updateProgress();
            
            // Check if all checkpoints are complete
            checkCompletion();
        }

        // Update progress circle
        function updateProgress() {
            let answeredCount = 0;
            Object.values(assessmentState.checkpoints).forEach(checkpoint => {
                if (checkpoint.answered) answeredCount++;
            });
            
            const progress = Math.floor((answeredCount / 6) * 100);
            const progressCircle = document.querySelector('.progress-circle-fill');
            const progressText = document.querySelector('.progress-text');
            
            // Calculate stroke offset (282.6 is circumference for r=45)
            const offset = 282.6 - (282.6 * progress) / 100;
            progressCircle.style.strokeDashoffset = offset;
            progressText.textContent = `${progress}%`;
            
            // Update progress label
            const progressLabel = document.querySelector('.progress-label p');
            if (progress < 100) {
                progressLabel.textContent = `${answeredCount} of 6 checkpoints completed. Continue to validate your CU optimization skills.`;
            } else {
                progressLabel.textContent = 'All checkpoints completed! Calculate your final score to assess certification readiness.';
            }
        }

        // Check if all checkpoints are complete
        function checkCompletion() {
            let allAnswered = true;
            Object.values(assessmentState.checkpoints).forEach(checkpoint => {
                if (!checkpoint.answered) allAnswered = false;
            });
            
            if (allAnswered && !assessmentState.completed) {
                assessmentState.completed = true;
                
                // Show completion message
                const completionMsg = document.createElement('div');
                completionMsg.innerHTML = `
                    <div style="background: linear-gradient(to right, #4CAF50, #2E7D32); color: white; padding: 25px; border-radius: 12px; margin: 30px 0; text-align: center;">
                        <h3 style="margin-bottom: 10px;"><i class="fas fa-trophy"></i> Assessment Complete!</h3>
                        <p>You have completed all 6 CU optimization checkpoints. Click "Calculate Final Score" to see your certification readiness.</p>
                    </div>
                `;
                document.querySelector('.readiness-section').parentNode.insertBefore(completionMsg, document.querySelector('.readiness-section'));
            }
        }

        // Calculate final score
        function calculateScore() {
            if (!assessmentState.completed) {
                alert('Please complete all checkpoints before calculating your final score.');
                return;
            }
            
            // Calculate total score
            let totalScore = 0;
            Object.values(assessmentState.checkpoints).forEach(checkpoint => {
                totalScore += checkpoint.score;
            });
            
            const finalScore = Math.round(totalScore / 6);
            assessmentState.totalScore = finalScore;
            
            // Update score display
            const scoreDisplay = document.getElementById('finalScore');
            scoreDisplay.textContent = finalScore;
            
            // Add score indicator
            scoreDisplay.style.color = 
                finalScore >= 90 ? '#4CAF50' :
                finalScore >= 80 ? '#8BC34A' :
                finalScore >= 70 ? '#FF9800' : '#F44336';
            
            // Show readiness message
            let readinessMessage = '';
            let readinessColor = '';
            
            if (finalScore >= 90) {
                readinessMessage = 'Fabric Architect – Exam Ready';
                readinessColor = '#4CAF50';
            } else if (finalScore >= 80) {
                readinessMessage = 'Strong Candidate – Minor Review Needed';
                readinessColor = '#8BC34A';
            } else if (finalScore >= 70) {
                readinessMessage = 'Partial Readiness – CU Concepts Weak';
                readinessColor = '#FF9800';
            } else {
                readinessMessage = 'Not Ready – Revisit CU Architecture';
                readinessColor = '#F44336';
            }
            
            const scoreCalculator = document.querySelector('.score-calculator');
            scoreCalculator.innerHTML += `
                <div style="margin-top: 25px; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 12px;">
                    <h4 style="color: white; margin-bottom: 10px;">Readiness Level: <span style="color: ${readinessColor}">${readinessMessage}</span></h4>
                    <p style="color: rgba(255,255,255,0.9); font-size: 0.95rem;">
                        ${finalScore >= 90 ? 'You demonstrate strong understanding of CU optimization principles. Focus on maintaining this knowledge for the exam.' :
                          finalScore >= 80 ? 'You have good grasp of concepts with minor gaps. Review scheduling strategies and concurrency management.' :
                          finalScore >= 70 ? 'You have basic understanding but need deeper knowledge of optimization techniques. Focus on pipeline decomposition.' :
                          'You have fundamental gaps in CU management concepts. Revisit CU architecture principles before exam preparation.'}
                    </p>
                </div>
            `;
            
            // Update calculate button
            const calculateBtn = document.querySelector('.calculate-btn');
            calculateBtn.disabled = true;
            calculateBtn.innerHTML = '<i class="fas fa-chart-bar"></i> Score Calculated';
            calculateBtn.style.opacity = '0.7';
        }

        // Download assessment
        document.getElementById('downloadAssessment').addEventListener('click', function() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1000;
            `;
            
            modal.innerHTML = `
                <div style="background: white; padding: 40px; border-radius: 16px; max-width: 600px; width: 90%;">
                    <h2 style="color: #005a9e; margin-bottom: 25px; font-size: 1.8rem;">Download Assessment Materials</h2>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">
                        <div style="padding: 25px; border: 2px solid #e1e8f0; border-radius: 12px; text-align: center; cursor: pointer;" onclick="downloadItem('checkpoints')">
                            <i class="fas fa-file-alt" style="font-size: 2.5rem; color: #0078d4; margin-bottom: 15px;"></i>
                            <h4 style="color: #005a9e; margin-bottom: 10px;">Checkpoints Only</h4>
                            <p style="font-size: 0.9rem; color: #666;">6 assessment questions</p>
                        </div>
                        <div style="padding: 25px; border: 2px solid #e1e8f0; border-radius: 12px; text-align: center; cursor: pointer;" onclick="downloadItem('complete')">
                            <i class="fas fa-file-pdf" style="font-size: 2.5rem; color: #4CAF50; margin-bottom: 15px;"></i>
                            <h4 style="color: #005a9e; margin-bottom: 10px;">Complete Package</h4>
                            <p style="font-size: 0.9rem; color: #666;">Questions + answers + scoring</p>
                        </div>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <button id="printAssessment" style="padding: 12px 25px; background: #607D8B; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
                            <i class="fas fa-print"></i> Print Assessment
                        </button>
                        <button id="closeModal" style="padding: 12px 25px; background: #0078d4; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">Close</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            window.downloadItem = function(type) {
                if (type === 'checkpoints') {
                    alert('Checkpoints PDF download started. Includes all 6 assessment questions.');
                } else {
                    alert('Complete package download started. Includes questions, model answers, and scoring rubric.');
                }
            };
            
            document.getElementById('printAssessment').addEventListener('click', function() {
                window.print();
            });
            
            document.getElementById('closeModal').addEventListener('click', function() {
                document.body.removeChild(modal);
            });
            
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            });
        });

        // Reset assessment
        document.getElementById('resetAssessment').addEventListener('click', function() {
            if (confirm('Reset all checkpoints and start over? Your current progress will be lost.')) {
                // Reset assessment state
                Object.keys(assessmentState.checkpoints).forEach(key => {
                    assessmentState.checkpoints[key] = { answered: false, correct: false, score: 0 };
                });
                assessmentState.totalScore = 0;
                assessmentState.completed = false;
                
                // Reset selected options
                selectedOptions = {
                    2: null,
                    3: null,
                    4: null,
                    5: []
                };
                
                // Reset UI
                document.querySelectorAll('.checkpoint-card').forEach(card => {
                    // Reset inputs
                    const textareas = card.querySelectorAll('textarea');
                    textareas.forEach(ta => ta.value = '');
                    
                    // Reset options
                    const options = card.querySelectorAll('.option, .multi-select-option');
                    options.forEach(opt => {
                        opt.classList.remove('selected', 'correct', 'incorrect', 'partial');
                    });
                    
                    // Reset buttons
                    const submitBtn = card.querySelector('.submit-btn');
                    submitBtn.disabled = true;
                    submitBtn.innerHTML = '<i class="fas fa-check-circle"></i> Submit Answer';
                    submitBtn.style.opacity = '1';
                    
                    const revealBtn = card.querySelector('.reveal-btn');
                    if (revealBtn) {
                        revealBtn.disabled = false;
                        revealBtn.innerHTML = '<i class="fas fa-eye"></i> Reveal Answer';
                        revealBtn.style.opacity = '1';
                    }
                    
                    // Hide model answers
                    const modelAnswer = card.querySelector('.model-answer');
                    if (modelAnswer) modelAnswer.classList.remove('show');
                    
                    // Clear feedback
                    const feedback = card.querySelector('.feedback-section');
                    if (feedback) feedback.innerHTML = '';
                });
                
                // Reset score display
                document.getElementById('finalScore').textContent = '--';
                
                // Remove completion message if exists
                const completionMsg = document.querySelector('.readiness-section').previousElementSibling;
                if (completionMsg && completionMsg.style.background.includes('4CAF50')) {
                    completionMsg.remove();
                }
                
                // Reset progress
                updateProgress();
                
                alert('Assessment reset. You can now start over.');
            }
        });

        // Approve assessment
        document.getElementById('approveAssessment').addEventListener('click', function() {
            if (confirm('Approve this assessment for use in Microsoft Fabric Architect training and certification preparation?')) {
                alert('Assessment approved! Added to Microsoft Fabric Architect training materials library.');
                
                const badge = document.querySelector('.assessment-badge');
                badge.textContent = 'APPROVED ASSESSMENT';
                badge.style.background = 'linear-gradient(to right, #4CAF50, #2E7D32)';
                
                const approveBtn = document.getElementById('approveAssessment');
                approveBtn.innerHTML = '<i class="fas fa-check-double"></i> Approved';
                approveBtn.style.background = 'linear-gradient(to right, #2E7D32, #1B5E20)';
                approveBtn.disabled = true;
                
                // Show approval message
                const approvalMsg = document.createElement('div');
                approvalMsg.innerHTML = `
                    <div style="background: linear-gradient(to right, #4CAF50, #2E7D32); color: white; padding: 20px; border-radius: 12px; margin-top: 30px; text-align: center;">
                        <h3 style="margin-bottom: 10px;"><i class="fas fa-check-circle"></i> Assessment Approved</h3>
                        <p>This CU optimization assessment has been approved for Microsoft Fabric Architect training and certification preparation.</p>
                    </div>
                `;
                document.querySelector('.footer-actions').parentNode.insertBefore(approvalMsg, document.querySelector('.footer-actions'));
            }
        });

        // Print styles
        const style = document.createElement('style');
        style.textContent = `
            @media print {
                body {
                    background: white !important;
                    color: black !important;
                    font-size: 11pt !important;
                }
                
                header, .progress-tracker, .checkpoint-card, .readiness-section, .score-calculator {
                    break-inside: avoid;
                    page-break-inside: avoid;
                    box-shadow: none !important;
                    border: 1px solid #ddd !important;
                }
                
                .footer-actions, .action-button, .assessment-badge, .checkpoint-tag, .reveal-btn, .submit-btn, .readiness-action, .calculate-btn {
                    display: none !important;
                }
                
                .model-answer {
                    display: block !important;
                    background: #f8fafc !important;
                    border: 1px solid #ddd !important;
                }
                
                h1 {
                    font-size: 18pt !important;
                }
                
                h2 {
                    font-size: 16pt !important;
                }
                
                h3 {
                    font-size: 14pt !important;
                }
                
                .checkpoint-card {
                    margin-bottom: 20pt !important;
                }
                
                .cu-visualization {
                    -webkit-print-color-adjust: exact;
                    print-color-adjust: exact;
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
